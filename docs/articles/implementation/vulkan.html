<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Vulkan Backend </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Vulkan Backend ">
    <meta name="generator" content="docfx 2.34.0.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="vulkan-backend">Vulkan Backend</h1>

<p>The Vulkan backend is a multi-platform backend implemented using the Vulkan API. Vulkan is supported on Windows, Linux, and Android. Vulkan&#39;s API is very close to Veldrid&#39;s and as such this is a fairly simple, straightforward backend.</p>
<p>Vulkan <a class="xref" href="../../api/Veldrid.GraphicsDevice.html">GraphicsDevices</a> are created from a <a class="xref" href="../../api/Veldrid.Vk.VkSurfaceSource.html">VkSurfaceSource</a>, which is a platform-specific object used to create a Vulkan surface (VkSurfaceKHR). The following helper functions are available:</p>
<ul>
<li><a class="xref" href="../../api/Veldrid.Vk.VkSurfaceSource.html#Veldrid_Vk_VkSurfaceSource_CreateWin32_IntPtr_IntPtr_">CreateWin32</a>: Creates a VkSurfaceSource for the given Win32 instance and window handle.</li>
<li><a class="xref" href="../../api/Veldrid.Vk.VkSurfaceSource.html#Veldrid_Vk_VkSurfaceSource_CreateXlib_Display__Window_">CreateXlib</a>: Creates a VkSurfaceSource for the given Xlib display and window.</li>
</ul>
<h2 id="api-concept-map">API Concept Map</h2>
<table>
<thead>
<tr>
<th>Veldrid Concept</th>
<th>Vulkan Concept</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><a class="xref" href="../../api/Veldrid.GraphicsDevice.html">GraphicsDevice</a></td>
<td><a href="https://www.khronos.org/registry/vulkan/specs/1.0/man/html/VkDevice.html">VkDevice</a>, <a href="https://www.khronos.org/registry/vulkan/specs/1.0/man/html/VkPhysicalDevice.html">VkPhysicalDevice</a>, <a href="https://www.khronos.org/registry/vulkan/specs/1.0/man/html/VkCommandPool.html">VkCommandPool</a>, <a href="https://www.khronos.org/registry/vulkan/specs/1.0/man/html/VkDescriptorPool.html">VkDescriptorPool</a>, <a href="https://www.khronos.org/registry/vulkan/specs/1.0/man/html/VkQueue.html">VkQueue</a></td>
<td></td>
</tr>
<tr>
<td><a class="xref" href="../../api/Veldrid.CommandList.html">CommandList</a></td>
<td><a href="https://www.khronos.org/registry/vulkan/specs/1.0/man/html/VkCommandBuffer.html">VkCommandBuffer</a></td>
<td></td>
</tr>
<tr>
<td><a class="xref" href="../../api/Veldrid.DeviceBuffer.html">DeviceBuffer</a></td>
<td><a href="https://www.khronos.org/registry/vulkan/specs/1.0/man/html/VkBuffer.html">VkBuffer</a></td>
<td></td>
</tr>
<tr>
<td><a class="xref" href="../../api/Veldrid.BufferUsage.html">BufferUsage</a></td>
<td><a href="https://www.khronos.org/registry/vulkan/specs/1.0/man/html/VkBufferUsageFlagBits.html">VkBufferUsageFlagBits</a></td>
<td></td>
</tr>
<tr>
<td><a class="xref" href="../../api/Veldrid.Texture.html">Texture</a></td>
<td><a href="https://www.khronos.org/registry/vulkan/specs/1.0/man/html/VkImage.html">VkImage</a></td>
<td></td>
</tr>
<tr>
<td><a class="xref" href="../../api/Veldrid.TextureUsage.html">TextureUsage</a></td>
<td><a href="https://www.khronos.org/registry/vulkan/specs/1.0/man/html/VkImageUsageFlagBits.html">VkImageUsageFlagBits</a></td>
<td></td>
</tr>
<tr>
<td><a class="xref" href="../../api/Veldrid.TextureView.html">TextureView</a></td>
<td><a href="https://www.khronos.org/registry/vulkan/specs/1.0/man/html/VkImageView.html">VkImageView</a></td>
<td></td>
</tr>
<tr>
<td><a class="xref" href="../../api/Veldrid.Sampler.html">Sampler</a></td>
<td><a href="https://www.khronos.org/registry/vulkan/specs/1.0/man/html/VkSampler.html">VkSampler</a></td>
<td></td>
</tr>
<tr>
<td><a class="xref" href="../../api/Veldrid.Pipeline.html">Pipeline</a></td>
<td><a href="https://www.khronos.org/registry/vulkan/specs/1.0/man/html/VkPipeline.html">VkPipeline</a></td>
<td></td>
</tr>
<tr>
<td><a class="xref" href="../../api/Veldrid.BlendStateDescription.html">Blend State</a></td>
<td><a href="https://www.khronos.org/registry/vulkan/specs/1.0/man/html/VkPipelineColorBlendStateCreateInfo.html">VkPipelineColorBlendStateCreateInfo</a></td>
<td></td>
</tr>
<tr>
<td><a class="xref" href="../../api/Veldrid.DepthStencilStateDescription.html">Depth Stencil State</a></td>
<td><a href="https://www.khronos.org/registry/vulkan/specs/1.0/man/html/VkPipelineDepthStencilStateCreateInfo.html">VkPipelineDepthStencilStateCreateInfo</a></td>
<td></td>
</tr>
<tr>
<td><a class="xref" href="../../api/Veldrid.RasterizerStateDescription.html">Rasterizer State</a></td>
<td><a href="https://www.khronos.org/registry/vulkan/specs/1.0/man/html/VkPipelineRasterizationStateCreateInfo.html">VkPipelineRasterizationStateCreateInfo</a></td>
<td></td>
</tr>
<tr>
<td><a class="xref" href="../../api/Veldrid.PrimitiveTopology.html">PrimitiveTopology</a></td>
<td><a href="https://www.khronos.org/registry/vulkan/specs/1.0/man/html/VkPrimitiveTopology.html">VkPrimitiveTopology</a>, <a href="https://www.khronos.org/registry/vulkan/specs/1.0/man/html/VkPipelineInputAssemblyStateCreateInfo.html">VkPipelineInputAssemblyStateCreateInfo</a></td>
<td></td>
</tr>
<tr>
<td><a class="xref" href="../../api/Veldrid.VertexLayoutDescription.html">Vertex Layouts</a></td>
<td><a href="https://www.khronos.org/registry/vulkan/specs/1.0/man/html/VkPipelineVertexInputStateCreateInfo.html">VkPipelineVertexInputStateCreateInfo</a></td>
<td></td>
</tr>
<tr>
<td><a class="xref" href="../../api/Veldrid.Shader.html">Shader</a></td>
<td><a href="https://www.khronos.org/registry/vulkan/specs/1.0/man/html/VkShaderModule.html">VkShaderModule</a></td>
<td></td>
</tr>
<tr>
<td><a class="xref" href="../../api/Veldrid.ShaderSetDescription.html">ShaderSetDescription</a></td>
<td>None</td>
<td></td>
</tr>
<tr>
<td><a class="xref" href="../../api/Veldrid.Framebuffer.html">Framebuffer</a></td>
<td><a href="https://www.khronos.org/registry/vulkan/specs/1.0/man/html/VkFramebuffer.html">VkFramebuffer</a></td>
<td></td>
</tr>
<tr>
<td><a class="xref" href="../../api/Veldrid.ResourceLayout.html">ResourceLayout</a></td>
<td><a href="https://www.khronos.org/registry/vulkan/specs/1.0/man/html/VkDescriptorSetLayout.html">VkDescriptorSetLayout</a></td>
<td></td>
</tr>
<tr>
<td><a class="xref" href="../../api/Veldrid.ResourceSet.html">ResourceSet</a></td>
<td><a href="https://www.khronos.org/registry/vulkan/specs/1.0/man/html/VkDescriptorSet.html">VkDescriptorSet</a></td>
<td></td>
</tr>
<tr>
<td><a class="xref" href="../../api/Veldrid.GraphicsDevice.html#Veldrid_GraphicsDevice_SwapchainFramebuffer">Swapchain</a></td>
<td>VkSwapchainKHR</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="notes">Notes</h2>
<p>Veldrid&#39;s API is modeled after modern graphics API&#39;s like Vulkan. As a result, this backend is simple, straightforward, and has very good performance. Driver support for Vulkan remains somewhat less common than other graphics API&#39;s, but new GPUs from all major vendors support Vulkan. In time, Vulkan will likely be supported by all major systems (excluding Apple&#39;s).</p>
<h3 id="memory-management">Memory Management</h3>
<p>Memory management must be custom-handled in Vulkan. The <code>VkDeviceMemoryManager</code> allocates and reclaims all memory needed in the Vulkan backend. In general, the allocation handling is as follows:</p>
<ul>
<li>The manager tracks several &quot;chunk allocators&quot;, one for each type of memory (the <code>memoryTypeBits</code> and <a href="https://www.khronos.org/registry/vulkan/specs/1.0/man/html/VkMemoryPropertyFlags.html">VkMemoryPropertyFlags</a> identify a &quot;type&quot; of memory).</li>
<li>Each chunk allocator tracks a set of contiguous allocations of real physical device memory.</li>
<li>When requested, an individual chunk allocator identifies a free chunk of memory (or allocates one), and subdivides it into an appropriate block for usage by the caller.</li>
<li>Chunk allocators also reclaim memory when a resource is disposed.</li>
</ul>
<h3 id="staging-textures">Staging Textures</h3>
<p>Staging Textures are actually implemented using VkBuffers, rather than VkImages. This has no observable effect on the implementation, and is actually the recommended approach.</p>
<p>Linear VkImages would be another option, but they are extremely limited in most Vulkan implementations, and cannot support all of the possible permutations of a staging Texture (dimensions, mips, array layers, etc.). For example, almost all Vulkan implementations require that Linear images be 2D (not even 1D), have one mip level, have one array layer, and are a small subset of pixel formats. Since staging Textures are conceptually just a contiguous, tightly-packed block of memory, a VkBuffer works perfectly and has none of the above limitations. Simple arithmetic can convert between the buffer&#39; linear address space into a Texture&#39;s 1D, 2D, or 3D address space. Vulkan has a variety of commands that perform copies between VkBuffers and VkImages.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/mellinoe/veldrid-docs/blob/master/articles/implementation/vulkan.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
             
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
